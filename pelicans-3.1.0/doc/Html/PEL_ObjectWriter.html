<!DOCTYPE html
     PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd">
<html>
<head>
  <title>PEL_ObjectWriter</title>
  <link rel ="stylesheet" type="text/css" href="stylesheet.css" title="Style">
</head>
<script>
  function asd()
  {
    parent.document.title="PEL_ObjectWriter_PELICANS 17_03_2010 ";
  }
</script> 

<body onload="asd();">

<!-- ========== START OF NAVBAR ========== -->
<a name="navbar_top"><!-- --></a>
<div id=navbar>
  <a name="navbar_top_firstrow"><!-- --></a>
  <div id=navbarapp>PELICANS 17_03_2010</div>
  <div id=navbarmenu>
    <a href="PELpack-tree.html"><span>Tree</span></a>
    <span class=selected>Class</span>
    <a href="PEL_ObjectWriter.hh.html"><span>Header</span></a>
    <a href="PEL_ObjectWriter.cc.html"><span>Implementation</span></a>
    <div id=navbarsub>
      <a href="index.html" target="_top">FRAMES :</a>
      <a href="PELpack-tree.html" target="_top">: NO FRAMES</a>
    </div>
  </div>
</div>
<!-- ========== END OF NAVBAR ========== -->

<br />
<div class=link2anchor>SUMMARY :: <a href="#method_summary">METHOD</a></div>
<br />


<!-- ====== START OF CLASS DATA ======== -->
<div id=classtitle>
  <span class=classpath>PELbase / </span><br />
  <span class=classname>Class  PEL_ObjectWriter</span>
</div>

<br />

<div id=hierarchy>
<ul class=rootclass><li><a href="PEL_Object.html#" target="classFrame">PEL_Object</a></li>
  <ul class=self><li>PEL_ObjectWriter</li>
</ul>
</div>
<hr />
<pre>
Servers used to store objects so that they can be retrieved with
associated <a href="PEL_ObjectReader.html#" target="classFrame">PEL_ObjectReader</a> instances.

Objects are stored in files according to some options
specified in the Hierarchical Data Structure provided 
at creation of <span class="uid1">self</span>. That data structure is briefly described below.

The entry of keyword "output_format" defines the format of the
saving files. There are two possibilities:
   - "text": human readable but not exact (truncated values)
   - "hybrid": parts of the data remain readable but 
               double or integer values are stored in binary format 
               (file with "bin" extension)
                
Several saving strategies are available :

   - all the saved cycles are stored in the same file

     example :
     
        MODULE PEL_ObjectWriter
           type = "all_cycles_in_one_file"
           file_name = join( getcwd(), "saving.pel" )
           output_format = "hybrid"
        END MODULE PEL_ObjectWriter

        A text file named "saving.pel" is created to store all the cycles
        (a companion binary file named "saving.pel.bin" is also created 
        to store the double and integer values).

   - each saved cycle is stored in a separate file (one cycle per file)

     example :
     
        MODULE PEL_ObjectWriter
           type = "cycles_in_separate_files"
           files_basename = join( getcwd(), "saving" )
           output_format = "hybrid"
        END MODULE PEL_ObjectWriter

        A sequence of text files named "saving.00001.pel", 
        "saving.00002.pel",... is created to store respectively 
        the first cycle, the second cycle,...
        (a sequence of companion binary files named "saving.00001.pel.bin", 
        "saving.00002.pel.bin",... is also created to stored
         the double and integer values).

   - only the last two cycles are stored

     example :
     
        MODULE PEL_ObjectWriter
           type = "last_two_cycles"
           file_name_0 = join( getcwd(), "saving_0.pel" )
           file_name_1 = join( getcwd(), "saving_1.pel" )
           output_format = "hybrid"
        END MODULE PEL_ObjectWriter

        The text files "saving_0.pel" and "saving_1.pel" are created to store
        the last two cycles ; the time of last modification of these files 
        identifies that of the more recent saving.
        (the companion binary files named "saving_0.pel.bin" and 
        "saving_1.pel.bin" are also created to store with the double and 
        integer values).


See <a href="PEL_ObjectReader.html#" target="classFrame">PEL_ObjectReader</a> and <a href="PEL_ApplicationRestorer.html#" target="classFrame">PEL_ApplicationRestorer</a> for restoring
objects stored with <a href="PEL_ObjectWriter.html#" target="classFrame">PEL_ObjectWriter</a> objects.

PUBLISHED
</pre>
<hr />
<a name="method_summary"></a>

<!-- ========== NEW CATEGORY ========== -->
<table class=category cellpadding=2 cellspacing=0 rules=rows>
  <tr class=heading><th class=name>Instance delivery and initialization</th><th class=protection>public</th></tr>
  <tr><td colspan="2"><a href="PEL_ObjectWriter.html#create" target="classFrame">static PEL_ObjectWriter* create( PEL_Object* a_owner, PEL_ModuleExplorer const* exp, PEL_ModuleExplorer const* header_exp )</a></td></tr>
</table>

<!-- ========== NEW CATEGORY ========== -->
<table class=category cellpadding=2 cellspacing=0 rules=rows>
  <tr class=heading><th class=name>Cycles</th><th class=protection>public</th></tr>
  <tr><td colspan="2"><a href="PEL_ObjectWriter.html#start_cycle" target="classFrame">void start_cycle( void )</a></td></tr>
  <tr><td colspan="2"><a href="PEL_ObjectWriter.html#terminate_cycle" target="classFrame">void terminate_cycle( void )</a></td></tr>
  <tr><td colspan="2"><a href="PEL_ObjectWriter.html#has_an_opened_cycle" target="classFrame">bool has_an_opened_cycle( void ) const</a></td></tr>
  <tr><td colspan="2"><a href="PEL_ObjectWriter.html#cycle_number" target="classFrame">size_t cycle_number( void ) const</a></td></tr>
</table>

<!-- ========== NEW CATEGORY ========== -->
<table class=category cellpadding=2 cellspacing=0 rules=rows>
  <tr class=heading><th class=name>Object storing</th><th class=protection>public</th></tr>
  <tr><td colspan="2"><a href="PEL_ObjectWriter.html#start_new_object" target="classFrame">void start_new_object( std::string const& class_name )</a></td></tr>
  <tr><td colspan="2"><a href="PEL_ObjectWriter.html#current_object_number" target="classFrame">size_t current_object_number( void ) const</a></td></tr>
  <tr><td colspan="2"><a href="PEL_ObjectWriter.html#add_entry" target="classFrame">void add_entry( std::string const& keyword, PEL_Data* data )</a></td></tr>
  <tr><td colspan="2"><a href="PEL_ObjectWriter.html#finalize_object" target="classFrame">void finalize_object( void )</a></td></tr>
</table>

<!-- ========== NEW METHOD ========== -->
<hr />
<a name="create"></a>
<div class=method>
<table class=prototype>
  <tr><td><code>static <a href="PEL_ObjectWriter.html#" target="classFrame">PEL_ObjectWriter</a>* create(</code></td><td><code><a href="PEL_Object.html#PEL_Object" target="classFrame">PEL_Object*</a> <span class="uid1">a_owner</span>,</tr>
  <tr><td /><td><code> <a href="PEL_ModuleExplorer.html#" target="classFrame">PEL_ModuleExplorer</a> const* <span class="uid1">exp</span>,</tr>
  <tr><td /><td><code> <a href="PEL_ModuleExplorer.html#" target="classFrame">PEL_ModuleExplorer</a> const* <span class="uid1">header_exp</span> ) </code></td></tr>
</table>
<br />
<br />
<div class=conditions>
  <span class=precondition>Precondition</span>
  <ul>
    <li><code><span class="uid1"><span class="uid1">exp</span></span> != 0</code></li>
  </ul>
<br />
  <span class=postcondition>Postcondition</span>
  <ul>
    <li><code>result != 0</code></li>
    <li><code>result-><a href="PEL_Object.html#owner" target="classFrame">owner</a>() == <span class="uid1"><span class="uid1">a_owner</span></span></code></li>
    <li><code>!result-><a href="PEL_ObjectWriter.html#has_an_opened_cycle" target="classFrame">has_an_opened_cycle</a>()</code></li>
  </ul>
</div>
<table class=footer>
<tr>
  <td class=link2anchor>SUMMARY :: <a href="#method_summary">METHOD</a></td></tr>
</table>
</div>

<!-- ========== NEW METHOD ========== -->
<hr />
<a name="start_cycle"></a>
<div class=method>
<table class=prototype>
  <tr><td><code>void start_cycle(</code></td><td><code>void ) </code></td></tr>
</table>
<pre>Start a new cycle.</pre>
<br />
<div class=conditions>
  <span class=precondition>Precondition</span>
  <ul>
    <li><code>!<a href="PEL_ObjectWriter.html#has_an_opened_cycle" target="classFrame">has_an_opened_cycle</a>()</code></li>
  </ul>
<br />
  <span class=postcondition>Postcondition</span>
  <ul>
    <li><code><a href="PEL_ObjectWriter.html#has_an_opened_cycle" target="classFrame">has_an_opened_cycle</a>()</code></li>
    <li><code><a href="PEL_ObjectWriter.html#cycle_number" target="classFrame">cycle_number</a>() == OLD( <a href="PEL_ObjectWriter.html#cycle_number" target="classFrame">cycle_number</a> ) + 1</code></li>
    <li><code><a href="PEL_ObjectWriter.html#current_object_number" target="classFrame">current_object_number</a>() == 0</code></li>
  </ul>
</div>
<table class=footer>
<tr>
  <td class=link2anchor>SUMMARY :: <a href="#method_summary">METHOD</a></td></tr>
</table>
</div>

<!-- ========== NEW METHOD ========== -->
<hr />
<a name="terminate_cycle"></a>
<div class=method>
<table class=prototype>
  <tr><td><code>void terminate_cycle(</code></td><td><code>void ) </code></td></tr>
</table>
<pre>Terminate the current cycle. <a href="PEL_ObjectWriter.html#finalize_object" target="classFrame">finalize_object</a> must have been
called as many times as <a href="PEL_ObjectWriter.html#start_new_object" target="classFrame">start_new_object</a>. If not, a fatal error
is raised.</pre>
<br />
<div class=conditions>
  <span class=precondition>Precondition</span>
  <ul>
    <li><code><a href="PEL_ObjectWriter.html#has_an_opened_cycle" target="classFrame">has_an_opened_cycle</a>()</code></li>
  </ul>
<br />
  <span class=postcondition>Postcondition</span>
  <ul>
    <li><code>!<a href="PEL_ObjectWriter.html#has_an_opened_cycle" target="classFrame">has_an_opened_cycle</a>()</code></li>
  </ul>
</div>
<table class=footer>
<tr>
  <td class=link2anchor>SUMMARY :: <a href="#method_summary">METHOD</a></td></tr>
</table>
</div>

<!-- ========== NEW METHOD ========== -->
<hr />
<a name="has_an_opened_cycle"></a>
<div class=method>
<table class=prototype>
  <tr><td><code>bool has_an_opened_cycle(</code></td><td><code>void ) const</code></td></tr>
</table>
<pre>Is there a cycle that is started and not terminated ?</pre>
<br />
<table class=footer>
<tr>
  <td class=link2anchor>SUMMARY :: <a href="#method_summary">METHOD</a></td></tr>
</table>
</div>

<!-- ========== NEW METHOD ========== -->
<hr />
<a name="cycle_number"></a>
<div class=method>
<table class=prototype>
  <tr><td><code>size_t cycle_number(</code></td><td><code>void ) const</code></td></tr>
</table>
<pre>cycle number</pre>
<br />
<table class=footer>
<tr>
  <td class=link2anchor>SUMMARY :: <a href="#method_summary">METHOD</a></td></tr>
</table>
</div>

<!-- ========== NEW METHOD ========== -->
<hr />
<a name="start_new_object"></a>
<div class=method>
<table class=prototype>
  <tr><td><code>void start_new_object(</code></td><td><code>std::string const& <span class="uid1">class_name</span> ) </code></td></tr>
</table>
<pre>Notify that the storage of a new object is starting so that all
subsequent calls to <a href="PEL_ObjectWriter.html#add_entry" target="classFrame">add_entry</a> are relative that object,
until <a href="PEL_ObjectWriter.html#finalize_object" target="classFrame">finalize_object</a> or <a href="PEL_ObjectWriter.html#start_new_object" target="classFrame">start_new_object</a> are called.</pre>
<br />
<div class=conditions>
  <span class=precondition>Precondition</span>
  <ul>
    <li><code><a href="PEL_ObjectWriter.html#has_an_opened_cycle" target="classFrame">has_an_opened_cycle</a>()</code></li>
  </ul>
<br />
  <span class=postcondition>Postcondition</span>
  <ul>
    <li><code><a href="PEL_ObjectWriter.html#current_object_number" target="classFrame">current_object_number</a>() == OLD( <a href="PEL_ObjectWriter.html#current_object_number" target="classFrame">current_object_number</a> ) + 1</code></li>
  </ul>
</div>
<table class=footer>
<tr>
  <td class=link2anchor>SUMMARY :: <a href="#method_summary">METHOD</a></td></tr>
</table>
</div>

<!-- ========== NEW METHOD ========== -->
<hr />
<a name="current_object_number"></a>
<div class=method>
<table class=prototype>
  <tr><td><code>size_t current_object_number(</code></td><td><code>void ) const</code></td></tr>
</table>
<pre>nonzero number associated to the object being currently stored if any,
0 otherwize</pre>
<br />
<div class=conditions>
  <span class=precondition>Precondition</span>
  <ul>
    <li><code><a href="PEL_ObjectWriter.html#has_an_opened_cycle" target="classFrame">has_an_opened_cycle</a>()</code></li>
  </ul>
</div>
<table class=footer>
<tr>
  <td class=link2anchor>SUMMARY :: <a href="#method_summary">METHOD</a></td></tr>
</table>
</div>

<!-- ========== NEW METHOD ========== -->
<hr />
<a name="add_entry"></a>
<div class=method>
<table class=prototype>
  <tr><td><code>void add_entry(</code></td><td><code>std::string const& <span class="uid1">keyword</span>,</tr>
  <tr><td /><td><code><a href="PEL_Data.html#" target="classFrame">PEL_Data</a>* <span class="uid1">data</span> ) </code></td></tr>
</table>
<br />
<br />
<div class=conditions>
  <span class=precondition>Precondition</span>
  <ul>
    <li><code><a href="PEL_ObjectWriter.html#has_an_opened_cycle" target="classFrame">has_an_opened_cycle</a>()</code></li>
    <li><code><a href="PEL_ObjectWriter.html#current_object_number" target="classFrame">current_object_number</a>() != 0</code></li>
    <li><code><span class="uid1"><span class="uid1">data</span></span>-><a href="PEL_Object.html#owner" target="classFrame">owner</a>() == 0</code></li>
  </ul>
<br />
  <span class=postcondition>Postcondition</span>
  <ul>
    <li><code><span class="uid1"><span class="uid1">data</span></span>-><a href="PEL_Object.html#is_under_ownership_of" target="classFrame">is_under_ownership_of</a>( this )</code></li>
  </ul>
</div>
<table class=footer>
<tr>
  <td class=link2anchor>SUMMARY :: <a href="#method_summary">METHOD</a></td></tr>
</table>
</div>

<!-- ========== NEW METHOD ========== -->
<hr />
<a name="finalize_object"></a>
<div class=method>
<table class=prototype>
  <tr><td><code>void finalize_object(</code></td><td><code>void ) </code></td></tr>
</table>
<pre>Notify that the storage of the current object is completed.</pre>
<br />
<div class=conditions>
  <span class=precondition>Precondition</span>
  <ul>
    <li><code><a href="PEL_ObjectWriter.html#has_an_opened_cycle" target="classFrame">has_an_opened_cycle</a>()</code></li>
  </ul>
<br />
  <span class=postcondition>Postcondition</span>
  <ul>
    <li><code><a href="PEL_ObjectWriter.html#current_object_number" target="classFrame">current_object_number</a>() == OLD( <a href="PEL_ObjectWriter.html#current_object_number" target="classFrame">current_object_number</a> ) - 1</code></li>
  </ul>
</div>
<table class=footer>
<tr>
  <td class=link2anchor>SUMMARY :: <a href="#method_summary">METHOD</a></td></tr>
</table>
</div>

</body>
</html>
